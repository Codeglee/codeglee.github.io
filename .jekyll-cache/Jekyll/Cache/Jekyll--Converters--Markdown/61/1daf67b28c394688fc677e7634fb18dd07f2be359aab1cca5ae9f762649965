I"‡<h3 id="ui-test-automation-continued-where-did-we-get-to">UI test automation continuedâ€¦ where did we get to?</h3>
<p>In the <a href="https://blog.codeglee.com/2022/03/23/an-automation-approach-pt1.html">previous post</a> we covered the setup required to externally initialise and configure our app such that the onboarding app flow could be skipped for UI test purposes.</p>

<p>In this post weâ€™ll:</p>

<ul>
  <li>Introduce an approach for shared automation identifiers</li>
  <li>Improve our app initialisation via a shared typed enum</li>
  <li>Swap our string constants for enum-based ones</li>
  <li>Encapsulate our screens behaviours and assertions using the Robot pattern</li>
  <li>Pass our failing UI test verifying that our onboarding approach works</li>
</ul>

<h4 id="launcharguments">LaunchArguments</h4>
<p>Weâ€™ll start by addressing the launch arguments<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup>.
Letâ€™s start on the app side by encapsulating the string constant into a <code class="language-plaintext highlighter-rouge">LaunchArgumentKey enum</code>.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">enum</span> <span class="kt">LaunchArgumentKey</span><span class="p">:</span> <span class="kt">String</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">skipOnboarding</span> <span class="o">=</span> <span class="s">"-skipOnboarding"</span>
<span class="p">}</span>
</code></pre></div></div>
<p>Weâ€™ll make this <code class="language-plaintext highlighter-rouge">enum</code> <em>shared</em> across both the App and UI Test targets.</p>

<p>On the app-side weâ€™ll update our <code class="language-plaintext highlighter-rouge">LaunchArgumentConfigurator</code> to use <code class="language-plaintext highlighter-rouge">LaunchArgumentKey</code>.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">enum</span> <span class="kt">LaunchArgumentConfigurator</span> <span class="p">{</span>

    <span class="kd">static</span> <span class="kd">func</span> <span class="nf">configure</span><span class="p">(</span>
        <span class="n">_</span> <span class="nv">context</span><span class="p">:</span> <span class="kt">AutomationContext</span><span class="p">,</span>
        <span class="n">with</span> <span class="nv">launchArguments</span><span class="p">:</span> <span class="p">[</span><span class="kt">String</span><span class="p">]</span>
    <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="n">launchArguments</span><span class="o">.</span><span class="nf">contains</span><span class="p">(</span><span class="kt">LaunchArgumentKey</span><span class="o">.</span><span class="n">skipOnboarding</span><span class="o">.</span><span class="n">rawValue</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">context</span><span class="o">.</span><span class="n">showOnboarding</span> <span class="o">=</span> <span class="kc">false</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><em>NOTE:</em> If we had more launch arguments, particularly ones with values associated we can do some more interesting and intelligent configuration but for now this is enough to increase maintainability.</p>

<p>Next, on the UI test side weâ€™ll introduce a helper class to better manage launch arguments.</p>

<h4 id="what-could-we-do-better">What could we do better?</h4>

<ol>
  <li></li>
</ol>

<h3 id="whats-next">Whatâ€™s next?</h3>

<ul>
  <li></li>
</ul>

<p>I hope this post was informative, feel free to send me your thoughts via Twitter.</p>

<p><strong>Footnotes:</strong></p>

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:1" role="doc-endnote">
      <p><em>^In a real app youâ€™ll want to do this when you have more than one use case (I use the rule of three - on the third repetition, abstract and improve)</em>Â <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>
:ET